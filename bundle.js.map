{"version":3,"sources":["main.js"],"names":["window","addEventListener","init","numOfTiles","maxElementsInTheLine","containerHeight","maxElementsPerContainer","theArrayOfTheTiles","theArrayOfTheContainers","body","document","getElementsByTagName","i","tile","Tile","container","Container","push","appendChild","_htmlElem","onResize","updateTheContainers","windowSize","getWindowSize","containerWidth","width","column","row","theCopy","slice","length","clear","setPosition","setSize","_value","tile2","setTileValue","splice","tile3","updateElements","console","log","innerWidth","height","innerHeight","Button","text","className","value","parent","createElement","innerHTML","classList","add","remove","x","y","color","_x","_y","_width","_height","style","backgroundColor","_buttons","_currentButtonIndex","index","group","btn1","btn2","btn3","btn","catchTheClick","e","setAsInactive","setAsActive","findIndex","isClickedButton","element","target","left","top","_elements","counter","map","elem","update"],"mappings":"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","file":"bundle.js","sourcesContent":["\nwindow.addEventListener('load', init);\n\nconst numOfTiles = 12;\nconst maxElementsInTheLine = 3;\nconst containerHeight = 300;\nconst maxElementsPerContainer = 3;\n\nvar theArrayOfTheTiles = [];\nvar theArrayOfTheContainers = [];\n\nfunction init() {\n  let body = document.getElementsByTagName('body')[0];\n\n  for (let i = 0; i < numOfTiles; i++) {\n    const tile = new Tile();\n    const container = new Container();\n\n    theArrayOfTheTiles.push(tile);\n    theArrayOfTheContainers.push(container);\n\n    body.appendChild(tile._htmlElem);\n  }\n\n  onResize();\n\n  window.addEventListener('resize', onResize);\n\n}\n\nfunction onResize() {\n  updateTheContainers();\n}\n\nfunction updateTheContainers() {\n\n  const windowSize = getWindowSize();\n  const containerWidth = windowSize.width / maxElementsInTheLine;\n  let column = 0;\n  let row = 0;\n  let theCopy = theArrayOfTheTiles.slice();\n\n  for(let i = 0; i < theArrayOfTheContainers.length; i++) {\n\n    let tile = theCopy[0];\n\n    if(!tile) return;\n\n    let container = theArrayOfTheContainers[i];\n\n    container.clear();\n    container.setPosition(containerWidth * column, containerHeight * row);\n    container.setSize(containerWidth, containerHeight);\n\n    container.push(tile);\n\n    if(tile._value == 2) {\n      let tile2 = theCopy[1];\n      if(tile2) {\n        tile2.setTileValue(2)\n        container.push(tile2);\n        theCopy.splice(0, 2);\n      }\n    } else if(tile._value == 1) {\n      let tile2 = theCopy[1];\n      let tile3 = theCopy[2];\n      if(tile2) {\n        tile2.setTileValue(1);\n        container.push(tile2);\n      }\n      if(tile3) {\n        tile3.setTileValue(1);\n        container.push(tile3);\n      }\n      theCopy.splice(0, 3);\n    } else {\n      theCopy.splice(0, 1);\n    }\n\n    container.updateElements();\n\n    console.log(theArrayOfTheContainers);\n\n    if(column == maxElementsInTheLine - 1) {\n      row++;\n      column = 0;\n    } else {\n      column++;\n    }\n\n  }\n\n  // console.log(theArrayOfTheContainers);\n\n}\n\nfunction getWindowSize() {\n  return {\n    width: window.innerWidth,\n    height: window.innerHeight\n  }\n}\n\nclass Button {\n\n  constructor(text = \"\", className = \"button\", value = 0, parent) {\n    this._htmlElem = document.createElement('div');\n    this._htmlElem.className = className;\n    this._htmlElem.innerHTML = text;\n    this._value = value;\n  }\n\n  setAsActive() {\n    this._htmlElem.classList.add('active');\n  }\n\n  setAsInactive() {\n    this._htmlElem.classList.remove('active');\n  }\n\n}\n\nclass Tile {\n\n  constructor(x = 0, y = 0, width = 0, height = 0, color = \"#eee\") {\n    this._x = x;\n    this._y = y;\n    this._width = width;\n    this._height = height;\n    this._htmlElem = document.createElement('div');\n    this._htmlElem.style.backgroundColor = color;\n    this._htmlElem.className = \"tile\";\n    this._buttons = [];\n    this._value = 3;\n    this._currentButtonIndex = 0;\n\n    let index = 0;\n    let group = document.createElement('div');\n    group.className = 'group';\n\n    let btn1 = new Button('1/1', 'button btn1', 3, this);\n    let btn2 = new Button('1/2', 'button btn1', 2, this);\n    let btn3 = new Button('1/3', 'button btn1', 1, this);\n\n    this._buttons.push(btn1, btn2, btn3);\n\n    for (let i = 0; i < this._buttons.length; i++) {\n      let btn = this._buttons[i];\n      btn._htmlElem.addEventListener('click', e => this.catchTheClick(e));\n      group.appendChild(btn._htmlElem);\n    }\n\n    this._htmlElem.appendChild(group);\n  }\n\n  setTileValue(index) {\n    if(index == this._currentButtonIndex) return false;\n    this._buttons[this._currentButtonIndex].setAsInactive();\n    this._buttons[index].setAsActive();\n    this._value = this._buttons[index]._value;\n    this._currentButtonIndex = index;\n    return true;\n  }\n\n  catchTheClick(e) {\n    const index = this._buttons.findIndex(isClickedButton);\n\n    function isClickedButton(element) {\n      return element._htmlElem == e.target;\n    }\n\n    if(this.setTileValue(index)) updateTheContainers();\n  }\n\n  update() {\n    this._htmlElem.style.width = this._width + 'px';\n    this._htmlElem.style.height = this._height + 'px';\n    this._htmlElem.style.left = this._x + 'px';\n    this._htmlElem.style.top = this._y + 'px';\n  }\n\n}\n\nclass Container {\n\n  constructor(x = 0, y = 0, width = 0, height = 0) {\n    this._x = x;\n    this._y = y;\n    this._width = width;\n    this._height = height;\n    this._elements = [];\n  }\n\n  setPosition(x, y) {\n    this._x = x;\n    this._y = y;\n  }\n\n  calculateTheSum() {\n    let counter = 0;\n    this._elements.map(element => {\n      counter += element._value;\n    });\n    return counter;\n  }\n\n  setSize(width, height) {\n    this._width = width;\n    this._height = height;\n  }\n\n  clear() {\n    this._elements = [];\n  }\n\n  push(elem) {\n    this._elements.push(elem);\n  }\n\n  updateElements() {\n    let length = this._elements.length;\n    for (let i = 0; i < length; i++) {\n      let elem = this._elements[i];\n      elem._width = this._width;\n      elem._height = this._height / length;\n      elem._x = this._x;\n      elem._y = this._y + this._height / length * i;\n      elem.update();\n    }\n  }\n}\n"],"sourceRoot":"/source/"}